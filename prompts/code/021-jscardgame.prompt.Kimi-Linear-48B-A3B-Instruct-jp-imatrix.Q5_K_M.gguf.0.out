```html
<!DOCTYPE html><html><head><title>Card Cascade</title><style>body{margin:0;background:#222;color:#fff;font-family:monospace;display:flex;justify-content:center;align-items:center;height:100vh}#game{width:400px;height:600px;display:grid;grid-template-columns:repeat(7,1fr);grid-template-rows:repeat(5,1fr);gap:2px;padding:10px;background:#111}card{display:flex;justify-content:center;align-items:center;width:50px;height:70px;background:#fff;color:#000;border:1px solid #000;font-size:10px;cursor:pointer;user-select:none}card.red{color:#b00}card.hidden{background:#000}card.dragging{opacity:.5}card.over{background:#444}</style></head><body><div id="game"></div><script>const suits=['♠','♥','♦','♣'];const ranks=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];let deck=[],stock=[],waste=[],foundations=[[],[],[],[]],tableaus=[[]];let dragged=null;function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}function createDeck(){for(let s of suits)for(let r of ranks){deck.push({suit:s,rank:r,value:['A','J','Q','K'].includes(r)?11:parseInt(r)||0,color:s==='♥'||s==='♦'})}}function deal(){deck=shuffle([...Array(52).keys()]);tableaus=[[],[],[],[],[],[],[]];for(let i=0;i<52;i++){tableaus[i%7].push({...deck[i],faceUp:i<7})}deck.length=0;render()}function render(){const game=document.getElementById('game');game.innerHTML='';for(let i=0;i<7;i++){for(let j=0;j<tableaus[i].length;j++){const c=tableaus[i][j];const card=document.createElement('card');card.textContent=c.rank+' '+c.suit;card.className=c.faceUp?'':'hidden'+(c.color?' red':'');if(j===tableaus[i].length-1)card.draggable=true;card.dataset.col=i;card.dataset.row=j;card.addEventListener('dragstart',e=>{dragged=e.target;card.classList.add('dragging')});card.addEventListener('dragend',e=>{card.classList.remove('dragging')});card.addEventListener('dragover',e=>{e.preventDefault();if(card!==dragged)card.classList.add('over')});card.addEventListener('drop',e=>{e.preventDefault();card.classList.remove('over');if(draggable(card)&&canMove(card,dragged)){move(card,dragged);render()}})}if(tableaus[i].length===0){const card=document.createElement('card');card.className='hidden';card.textContent='';game.appendChild(card)}}for(let f of foundations){if(f.length){const card=document.createElement('card');card.textContent=f[f.length-1].rank+' '+f[f.length-1].suit;card.className='red';game.appendChild(card)}}}function canMove(from,to){if(!from||!to)return false;const f=from.dataset.col||from.parentElement.dataset.col;const t=to.dataset.col||to.parentElement.dataset.col;if(f===t){if(to.classList.contains('hidden'))return false;const fromCard=tableaus[f][from.dataset.row];const toCard=tableaus[f][to.dataset.row-1];if(!toCard)return fromCard.value===13;return fromCard.value===toCard.value-1}return false}function move(from,to){const f=from.dataset.col||from.parentElement.dataset.col;const t=to.dataset.col||to.parentElement.dataset.col;const fromCard=tableaus[f][from.dataset.row];const toCard=tableaus[t][to.dataset.row-1];if(to.classList.contains('hidden')){tableaus[f].splice(from.dataset.row,1);if(f===t)tableaus[f].splice(to.dataset.row,0,toCard,fromCard);else tableaus[t].push(fromCard)}else{tableaus[f].splice(from.dataset.row,1);tableaus[t].push(fromCard)}if(tableaus[f].length===0)tableaus[f].push({suit:'',rank:'',faceUp:true})}document.addEventListener('DOMContentLoaded',()=>{createDeck();deal()});</script></body></html>
``` [end of text]


