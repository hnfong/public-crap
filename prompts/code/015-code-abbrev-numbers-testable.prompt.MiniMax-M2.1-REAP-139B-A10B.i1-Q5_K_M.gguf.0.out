```python
def abbrev_num(x):
    if x < 1000:
        return str(x)
    elif x < 1_000_000:
        suffix = 'K'
        divisor = 1000
    elif x < 1_000_000_000:
        suffix = 'M'
        divisor = 1_000_000
    else:
        suffix = 'B'
        divisor = 1_000_000_000
    
    value = x / divisor
    # Try 2 decimal places first
    formatted = f"{value:.2f}"
    if len(formatted) <= 4:
        return formatted + suffix
    
    # If too long, try 1 decimal place
    formatted = f"{value:.1f}"
    if len(formatted) <= 4:
        return formatted + suffix
    
    # If still too long, round to integer
    return f"{round(value)}{suffix}"
``` [end of text]


