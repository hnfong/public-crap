```html
<!DOCTYPE html><html><head><title>Card Cascade</title><style>body{margin:0;background:#222;color:#fff;font-family:monospace;display:flex;justify-content:center;align-items:center;height:100vh}#game{width:400px;height:600px;display:grid;grid-template-columns:repeat(7,1fr);grid-template-rows:repeat(7,1fr);gap:2px;padding:10px;background:#000}card{display:flex;justify-content:center;align-items:center;font-size:20px;width:50px;height:70px;border:1px solid #444;border-radius:5px;background:#fff;color:#000;cursor:pointer;user-select:none}card.red{color:red}card.hidden{background:#000;color:#000;cursor:default}card.dragging{opacity:.5}card.over{border:2px dashed #0f0}</style></head><body><div id="game"></div><script>const suits=['â™ ','â™¥','â™¦','â™£'];const ranks=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];let deck=[],stock=[],waste=[],foundations=[[],[],[],[]],tableaus=[[],[],[],[],[],[],[]];function createDeck(){deck=[];for(let s of suits)for(let r of ranks){deck.push({suit:s,rank:r,value:r==='A'?1:r==='J'?11:r==='Q'?12:r==='K'?13:parseInt(r)})}}function shuffle(){for(let i=deck.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[deck[i],deck[j]]=[deck[j],deck[i]]}}function deal(){tableaus.forEach((t,i)=>t.length=0);stock.length=0;waste.length=0;for(let i=0;i<52;i++){let card=deck[i];if(i<28){tableaus[i%7].push(card)}else{stock.push(card)}}render()}function render(){const game=document.getElementById('game');game.innerHTML='';tableaus.forEach((t,i)=>{t.forEach((card,j)=>{let c=document.createElement('card');c.textContent=card.rank+(card.suit==='â™¥'||card.suit==='â™¦'?'':'')+(j===t.length-1?'':'â¬œ');c.className=card.suit==='â™¥'||card.suit==='â™¦'?'red':'';if(j<t.length-1)c.classList.add('hidden');c.draggable=true;c.dataset.col=i;c.dataset.row=j;c.ondragstart=e=>{e.dataTransfer.setData('text/plain',JSON.stringify({card,from:'tableau',col:i,row:j}))};c.ondragover=e=>{e.preventDefault();e.currentTarget.classList.add('over')}})});stock.forEach((card,i)=>{let c=document.createElement('card');c.textContent='ðŸƒ';c.className='hidden';c.draggable=true;c.dataset.col=7;c.dataset.row=i;c.ondragstart=e=>{e.dataTransfer.setData('text/plain',JSON.stringify({card,from:'stock',index:i}))};c.ondragover=e=>{e.preventDefault();e.currentTarget.classList.add('over')}});waste.forEach((card,i)=>{let c=document.createElement('card');c.textContent=card.rank+(card.suit==='â™¥'||card.suit==='â™¦'?'':'')+(i===waste.length-1?'':'â¬œ');c.className=card.suit==='â™¥'||card.suit==='â™¦'?'red':'';c.draggable=true;c.dataset.col=8;c.dataset.row=i;c.ondragstart=e=>{e.dataTransfer.setData('text/plain',JSON.stringify({card,from:'waste',index:i}))};c.ondragover=e=>{e.preventDefault();e.currentTarget.classList.add('over')}})}document.addEventListener('dragover',e=>e.preventDefault());document.addEventListener('drop',e=>{e.preventDefault();let data=JSON.parse(e.dataTransfer.getData('text/plain'));let target=e.target.closest('card');if(!target)return;let from=data.from;let to={col:parseInt(target.dataset.col),row:parseInt(target.dataset.row)};if(from==='stock'){if(stock.length>0){waste.push(stock.pop());render()}}else if(from==='waste'){if(waste.length>0){let card=waste.pop();tableaus[to.col].push(card);render()}}else if(from==='tableau'){let sourceCol=data.col;let sourceRow=data.row;let card=tableaus[sourceCol][sourceRow];if(canMove(card,tableaus[to.col])){tableaus[sourceCol].splice(sourceRow,1);tableaus[to.col].push(card);render()}}});function canMove(card,toTableau){if(toTableau.length===0)return card.value===13;if(toTableau[toTableau.length-1].suit!==card.suit)return false;return toTableau[toTableau.length-1].value===card.value-1}document.addEventListener('keydown',e=>{if(e.key===' '){stock.length>0&&(waste.push(stock.pop()),render())}});createDeck();shuffle();deal();</script></body></html>
``` [end of text]


