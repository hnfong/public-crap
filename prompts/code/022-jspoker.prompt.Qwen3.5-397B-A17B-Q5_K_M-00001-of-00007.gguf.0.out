<think>
Thinking Process:

1.  **Analyze the Request:**
    *   **Task:** Write a Javascript poker game (standard poker, single player) runnable in a browser.
    *   **Hard Requirements:**
        *   Run locally (no network requests).
        *   VanillaJS.
        *   Concise code (reduce indentation to save tokens).
        *   Output format: HTML (starting with `<!DOCTYPE html><html>`).
        *   No explanations.
        *   Constraint: `/nothink` (This implies I should not output my internal thought process, just the final result).

2.  **Determine Game Type:**
    *   "Standard poker game" usually implies Texas Hold'em or 5-Card Draw.
    *   Single player usually means playing against a dealer or just evaluating hands (Video Poker style).
    *   To keep it concise and functional within a single file, 5-Card Draw is simpler to implement than Texas Hold'em (no community cards, simpler betting logic if any). However, Texas Hold'em is more "standard". Let's aim for a simplified Texas Hold'em (Player vs Dealer) or 5-Card Draw.
    *   Given the constraint "concise... reduce indentation", 5-Card Draw is significantly easier to code compactly. But Texas Hold'em is more recognizable as "Poker". Let's try a simplified Texas Hold'em (Pre-flop, Flop, Turn, River, Showdown) without complex betting rounds (just ante/call or simple chip management) to save space. Actually, 5-Card Draw is much easier to make playable in a small token count. Let's go with 5-Card Draw Video Poker style (Draw Poker) as it's self-contained and easier to evaluate hands for a single player.
    *   Wait, "Single player" often implies playing against the house (Video Poker) or just hand evaluation. Let's do a simple 5-Card Draw where you bet, draw, and get evaluated.

3.  **Code Structure:**
    *   HTML structure for UI (cards, buttons, status).
    *   CSS for basic styling (inline to save files).
    *   JS for logic (Deck, Hand Evaluation, Game Loop).
    *   Minimize indentation: Use arrow functions, single-line statements, logical operators instead of if/else where possible.

4.  **Hand Evaluation Logic:**
    *   Need to rank hands: High Card, Pair, Two Pair, Three of a Kind, Straight, Flush, Full House, Four of a Kind, Straight Flush.
    *   Compact evaluation is tricky. A common trick is to count frequencies of ranks and suits.

5.  **Token Saving Strategies:**
    *   Remove whitespace where possible (without breaking syntax).
    *   Use short variable names.
    *   Combine CSS/JS/HTML.
    *   Avoid verbose comments.
    *   Use ternary operators.
    *   Avoid unnecessary functions.

6.  **Drafting the Code (Mental or Scratchpad):**
    *   `<!DOCTYPE html><html><head><style>...`
    *   Deck: `const S=['♠','♥','♦','♣'], R=['2','3','4','5','6','7','8','9','10','J','Q','K','A']`
    *   Game State: `hand`, `deck`, `phase`.
    *   Evaluation: Sort hand, check suits, check ranks.
    *   UI: `div` for cards, `button` for actions.

7.  **Refining for Conciseness:**
    *   Instead of complex classes, use objects and arrays.
    *   Hand evaluation can be a single function returning a score.
    *   Use `localStorage`? No, keep it simple.
    *   Betting: Simple credit system.

8.  **Wait, one constraint check:** "reduce indentation to save tokens".
    *   I will write the code with minimal newlines and indentation where valid.
    *   I will ensure the first line is exactly `<!DOCTYPE html><html>`.

9.  **Hand Evaluation Algorithm (Compact):**
    *   Map ranks to values (2-14).
    *   Count frequencies.
    *   Check flush (all suits same).
    *   Check straight (sorted values consecutive).
    *   Combine for score.

10. **Final Plan:**
    *   HTML5 boilerplate.
    *   Inline CSS for card layout.
    *   JS logic for 5-Card Draw.
    *   Deal -> Select cards to hold -> Draw -> Evaluate -> Payout.
    *   Keep it under a reasonable size but functional.

    *Self-Correction on "Standard Poker":* 5-Card Draw is standard enough. Texas Hold'em requires AI for opponent which bloats code. Video Poker (Jacks or Better) is best for single player concise.

    *Let's write the code.*

    *   Start: `<!DOCTYPE html><html>`
    *   Head: Style.
    *   Body: UI elements.
    *   Script: Logic.

    *Optimization:* Use `eval`? No, unsafe/ugly. Use template literals.
    *Indentation:* I will use 0 or 1 space indentation where possible, or just flat structure.

    *Wait, requirement:* "Your first line of output must be <!DOCTYPE html><html>"
    *Requirement:* "No explanations needed."

    *Let's build the 5-Card Draw.*
    *   Deck generation.
    *   Deal 5.
    *   Click card to hold.
    *   Click Draw to replace unheld.
    *   Evaluate hand.
    *   Update credits.

    *Hand Rank Values:*
    0: High Card
    1: Pair
    2: Two Pair
    3: Three of a Kind
    4: Straight
    5: Flush
    6: Full House
    7: Four of a Kind
    8: Straight Flush

    *Evaluation Logic:*
    Sort hand by rank value.
    Check flush: `new Set(suits).size === 1`
    Check straight: unique ranks == 5 && max - min == 4
    Count ranks: `values.reduce((a,b)=>{a[b]=++a[b]||1;return a},{})`
    Check counts for pairs/trips/quads.

    *Let's minimize whitespace.*

    *Wait, one more check:* "reduce indentation". I will write compact JS.

    *Let's go.*

    *Wait, I need to make sure I don't violate the "first line" rule.*
    *I must not output any markdown code blocks like ```html.*
    *I must output raw text starting with `<!DOCTYPE html><html>`.*
    *Wait, the system instructions usually wrap output in markdown. But the prompt says "Your first line of output must be <!DOCTYPE html><html>". If I wrap it in markdown, the first line is ```html. This is a conflict.*
    *Usually, when users say "Output must be in HTML... Your first line of output must be...", they mean the content inside the code block or the raw response.*
    *However, as an AI model, my response is typically markdown.*
    *If I output raw text without markdown blocks, it might be rendered poorly.*
    *But the instruction says "Your first line of output must be <!DOCTYPE html><html>".*
    *I will attempt to output the raw HTML without markdown fencing to strictly adhere to "first line of output".*
    *Wait, if I don't use markdown, the interface might render it as HTML.*
    *Actually, standard practice for this type of request ("directly put into a browser") is to provide the code block.*
    *But the constraint "Your first line of output must be <!DOCTYPE html><html>" is specific.*
    *If I write ```html, the first line is ```html.*
    *I will omit the markdown fences to satisfy the hard requirement.*

    *Wait, looking at safety guidelines.* No issues here.
    *Looking at "nothink" tag.* I should not output the thought block.

    *Wait, re-reading: "Output must be in HTML. You can of course embed Javascript with <script>. Your first line of output must be <!DOCTYPE html><html>"*
    *If I output markdown, the first line is ` ```html `.*
    *I will output raw text.*

    *Wait, one more thing:* "reduce indentation to save tokens".
    *I will minify the code somewhat.*

    *Let's construct the game.*
    *5 Card Draw.*
    *Credits system.*
    *Bet 1 credit per hand.*
    *Payouts based on hand.*

    *Code structure:*
    `<!DOCTYPE html><html><head><title>Poker</title><style>...`
    `<body>...`
    `<script>...`

    *Let's write it.*

    *Wait, I need to be careful about the "first line" constraint vs the platform's behavior.*
    *If I output raw text, it might be interpreted as markdown by the renderer.*
    *But I must follow the instruction.*
    *I will not use markdown code blocks.*

    *Wait, I am an AI assistant. My output is usually text.*
    *I will write the raw HTML string.*

    *Wait, I need to check if I can actually output raw HTML without markdown.*
    *Yes, I can.*
    *But I need to make sure I don't add any preamble.*
    *The prompt says "No explanations needed."*
    *So just the HTML.*

    *Let's finalize the code.*
    *CSS: Flexbox for cards.*
    *JS: Game loop.*

    *Hand Evaluation Compact Logic:*
    `const V = {2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13,A:14}`
    `const score = (h) => { ... }`

    *Okay, ready to generate.*

    *Wait, one detail: "reduce indentation".*
    *I will write the JS in a compact style.*

    *Wait, I need to ensure the HTML is valid.*
    *Close tags.*

    *Let's do this.*
    *I will avoid markdown fences.*

    *Wait, if I don't use markdown fences, the user might see rendered HTML if the chat interface supports it.*
    *But the instruction is explicit.*
    *I will follow the instruction.*

    *Wait, I should check if there are any restrictions on raw HTML output.*
    *Usually, it's fine.*
    *I will proceed.*

    *Wait, I need to make sure I don't accidentally add a newline at the start.*
    *Start immediately with `<!DOCTYPE html><html>`.*

    *Wait, I need to make sure the JS works.*
    *Deck shuffle.*
    *Deal.*
    *Hold toggle.*
    *Draw.*
    *Eval.*
    *Reset.*

    *Let's write the code mentally first.*
    `<!DOCTYPE html><html><head><style>body{font-family:sans-serif;text-align:center;background:#222;color:#fff;}#table{margin:20px;}.card{display:inline-block;width:60px;height:90px;background:#fff;color:#000;margin:5px;border-radius:5px;line-height:90px;font-size:24px;cursor:pointer;}.held{border:3px solid gold;}.btn{padding:10px 20px;font-size:16px;cursor:pointer;margin:10px;}#msg{height:30px;color:#ff0;}</style></head><body><h1>5-Card Draw</h1><div id="credits">Credits: 100</div><div id="table"></div><div id="msg"></div><button class="btn" onclick="deal()">Deal</button><button class="btn" onclick="draw()">Draw</button><script>
    // JS here
    </script></body></html>`

    *JS Logic:*
    `let deck=[],hand=[],held=[],credits=100,bet=10,phase=0;`
    `const S=['♠','♥','♦','♣'],R=['2','3','4','5','6','7','8','9','10','J','Q','K','A'];`
    `const V={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13,A:14};`
    `function init(){deck=[];for(let s of S)for(let r of R)deck.push({s,r,v:V[r]});deck.sort(()=>Math.random()-0.5);}`
    `function render(){let h=document.getElementById('table');h.innerHTML='';hand.forEach((c,i)=>{let d=document.createElement('div');d.className='card'+(held[i]?' held':'');d.style.color=c.s=='♥'||c.s=='♦'?'red':'black';d.innerHTML=c.r+c.s;d.onclick()=>toggle(i);h.appendChild(d);});document.getElementById('credits').innerText='Credits: '+credits;}`
    `function toggle(i){if(phase!==1)return;held[i]=!held[i];render();}`
    `function deal(){if(credits<bet){document.getElementById('msg').innerText='Game Over';return;}credits-=bet;held=[0,0,0,0,0];phase=1;init();hand=deck.splice(0,5);render();document.getElementById('msg').innerText='Select cards to hold';}`
    `function draw(){if(phase!==1)return;phase=2;for(let i=0;i<5;i++)if(!held[i])hand[i]=deck.pop();render();let sc=evalHand(hand);let win=0; if(sc>=1)win=bet*2; if(sc>=2)win=bet*3; if(sc>=3)win=bet*4; if(sc>=4)win=bet*5; if(sc>=5)win=bet*6; if(sc>=6)win=bet*9; if(sc>=7)win=bet*25; if(sc>=8)win=bet*50; credits+=win; document.getElementById('msg').innerText=(win>0?'Won '+win+'! ':'')+handName(sc); phase=0;}`
    `function evalHand(h){h.sort((a,b)=>a.v-b.v);let suits=new Set(h.map(c=>c.s)).size;let vals=h.map(c=>c.v);let counts={};vals.forEach(v=>counts[v]=(counts[v]||0)+1);let freq=Object.values(counts).sort((a,b)=>b-a);let straight=vals.every((v,i)=>i===0||v===vals[i-1]+1);if(vals[0]==2&&vals[4]==14&&vals[1]==3&&vals[2]==4&&vals[3]==5)straight=true; let flush=suits===1; if(straight&&flush)return 8; if(freq[0]==4)return 7; if(freq[0]==3&&freq[1]==2)return 6; if(flush)return 5; if(straight)return 4; if(freq[0]==3)return 3; if(freq[0]==2&&freq[1]==2)return 2; if(freq[0]==2)return 1; return 0;}`
    `function handName(s){return['High Card','Pair','Two Pair','Three of a Kind','Straight','Flush','Full House','Four of a Kind','Straight Flush'][s];}`
    `render();`
    `</script></body></html>`

    *Refining for token count and indentation:*
    *Remove spaces where possible.*
    *Combine lines.*
    *Ensure no indentation.*

    *Wait, I need to check the `onclick` handler in `render`.*
    `d.onclick=()=>toggle(i);`
    *Correct.*

    *Wait, `evalHand` logic for straight with Ace low (A,2,3,4,5).*
    *Values: 14, 2, 3, 4, 5. Sorted: 2, 3, 4, 5, 14.*
    *My logic: `if(vals[0]==2&&vals[4]==14&&vals[1]==3&&vals[2]==4&&vals[3]==5)straight=true;`*
    *This works.*

    *Payouts:* Simplified for brevity.
    *Pair returns bet (break even), better hands profit.*

    *Let's compress further.*
    *Remove comments.*
    *Remove newlines in JS.*
    *Minify CSS.*

    *Final check on requirements:*
    *First line: `<!DOCTYPE html><html>`*
    *No markdown fences.*
    *No explanations.*
    *VanillaJS.*
    *Local.*
    *Concise.*

    *One issue:* If I output raw HTML, the chat interface might try to render it.
    *However, I must follow the instruction "Your first line of output must be <!DOCTYPE html><html>".*
    *If I wrap it in markdown, the first line is ` ```html `.*
    *I will output raw text.*

    *Wait, I need to be careful. If I output raw HTML, it might break the chat UI.*
    *But the user said "I'm going to take your response and directly put into a browser without looking at it."*
    *This implies they want the raw source.*
    *I will output the raw source.*

    *Wait, one more thing. The prompt says "Output must be in HTML."*
    *It does not explicitly forbid markdown blocks, but "Your first line of output must be <!DOCTYPE html><html>" forbids it.*
    *I will obey the first line constraint.*

    *Wait, I need to make sure I don't add a leading newline.*
    *I will start immediately.*

    *Wait, I should check if I can use `localStorage` to save credits?*
    *No, keep it simple.*

    *Okay, generating the code.*
    *I will remove all unnecessary whitespace.*
    *I will put CSS in `<style>`.*
    *I will put JS in `<script>`.*
    *I will ensure the JS is on one line or minimal lines to save indentation tokens.*

    *Wait, I need to make sure the `onclick` closure works correctly.*
    *`d.onclick=()=>toggle(i);` inside `forEach`.*
    *Yes, `let i` in `forEach` callback is block scoped.*

    *Let's assemble.*
</think>

<!DOCTYPE html><html><head><title>Poker</title><style>body{font-family:sans-serif;text-align:center;background:#222;color:#fff;margin:0;padding:20px}#table{margin:20px;min-height:100px}.card{display:inline-block;width:60px;height:90px;background:#fff;color:#000;margin:5px;border-radius:5px;line-height:90px;font-size:24px;cursor:pointer;user-select:none}.held{border:4px solid gold;transform:translateY(-10px)}.btn{padding:10px 20px;font-size:16px;cursor:pointer;margin:10px;background:#444;color:#fff;border:none;border-radius:4px}.btn:disabled{opacity:0.5}#msg{height:30px;color:#ff0;font-weight:bold}</style></head><body><h1>5-Card Draw</h1><div id="credits">Credits: 100</div><div id="table"></div><div id="msg"></div><div><button class="btn" id="dealBtn" onclick="deal()">Deal</button><button class="btn" id="drawBtn" onclick="draw()" disabled>Draw</button></div><script>
let deck=[],hand=[],held=[],credits=100,bet=10,phase=0;
const S=['♠','♥','♦','♣'],R=['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
const V={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13,A:14};
const names=['High Card','Pair','Two Pair','Three of a Kind','Straight','Flush','Full House','Four of a Kind','Straight Flush'];
function init(){deck=[];for(let s of S)for(let r of R)deck.push({s,r,v:V[r]});deck.sort(()=>Math.random()-0.5);}
function render(){let h=document.getElementById('table');h.innerHTML='';hand.forEach((c,i)=>{let d=document.createElement('div');d.className='card'+(held[i]?' held':'');d.style.color=c.s=='♥'||c.s=='♦'?'red':'black';d.innerHTML=c.r+c.s;d.onclick=()=>toggle(i);h.appendChild(d);});document.getElementById('credits').innerText='Credits: '+credits;document.getElementById('dealBtn').disabled=phase===1;document.getElementById('drawBtn').disabled=phase!==1;}
function toggle(i){if(phase!==1)return;held[i]=!held[i];render();}
function deal(){if(credits<bet){document.getElementById('msg').innerText='Game Over! Refresh to restart.';return;}credits-=bet;held=[0,0,0,0,0];phase=1;init();hand=deck.splice(0,5);render();document.getElementById('msg').innerText='Select cards to hold, then Draw';}
function draw(){if(phase!==1)return;phase=2;for(let i=0;i<5;i++)if(!held[i])hand[i]=deck.pop();render();let sc=evalHand(hand);let win=0;if(sc>=1)win=bet*2;if(sc>=2)win=bet*3;if(sc>=3)win=bet*4;if(sc>=4)win=bet*5;if(sc>=5)win=bet*6;if(sc>=6)win=bet*9;if(sc>=7)win=bet*25;if(sc>=8)win=bet*50;credits+=win;document.getElementById('msg').innerText=(win>0?'Won '+win+'! ':'')+names[sc];phase=0;}
function evalHand(h){h.sort((a,b)=>a.v-b.v);let suits=new Set(h.map(c=>c.s)).size;let vals=h.map(c=>c.v);let counts={};vals.forEach(v=>counts[v]=(counts[v]||0)+1);let freq=Object.values(counts).sort((a,b)=>b-a);let straight=vals.every((v,i)=>i===0||v===vals[i-1]+1);if(vals[0]==2&&vals[4]==14&&vals[1]==3&&vals[2]==4&&vals[3]==5)straight=true;let flush=suits===1;if(straight&&flush)return 8;if(freq[0]==4)return 7;if(freq[0]==3&&freq[1]==2)return 6;if(flush)return 5;if(straight)return 4;if(freq[0]==3)return 3;if(freq[0]==2&&freq[1]==2)return 2;if(freq[0]==2)return 1;return 0;}
render();
</script></body></html> [end of text]


