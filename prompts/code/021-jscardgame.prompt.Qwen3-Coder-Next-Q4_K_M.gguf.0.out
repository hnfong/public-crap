<!DOCTYPE html><html><body><canvas id="c" width="800" height="600"></canvas><script>const ctx=c.getContext('2d');let cards=[],piles=[],drag={active:false},suits=['♠','♥','♣','♦'],colors={♠:'black',♥:'red',♣:'black',♦:'red'};function init(){for(let s of suits){for(let v=1;v<=13;v++)cards.push({v,s,c:v===1?'A':v<11?v:'JQK'[v-11],x:0,y:0,w:60,h:84,face:false});}cards.sort(()=>Math.random()-.5);let cx=50,cy=50;for(let i=0;i<7;i++){piles.push({x:cx,y:cy,cards:[]});cx+=80;if(i===3)cx+=100;}cx=50;cy=150;for(let i=0;i<7;i++){piles.push({x:cx,y:cy,cards:[]});cx+=80;if(i===3)cx+=100;}let fcx=50,fcy=350;for(let i=0;i<4;i++){piles.push({x:fcx,y:fcy,cards:[],type:'foundation'});fcx+=80;}let scx=50,scy=450;for(let i=0;i<4;i++){piles.push({x:scx,y:scy,cards:[],type:'stock'});scx+=80;}let k=0;for(let i=0;i<7;i++){for(let j=0;j<=i;j++)piles[i].cards.push(cards[k++]);piles[i].cards[piles[i].cards.length-1].face=true;}piles[7].cards.push(...cards.slice(k));}function draw(){ctx.fillStyle='#006400';ctx.fillRect(0,0,800,600);for(let p of piles){ctx.fillStyle='#fff';ctx.fillRect(p.x-5,p.y-5,p.w+10,p.h+10);ctx.strokeStyle='#000';ctx.strokeRect(p.x-5,p.y-5,p.w+10,p.h+10);if(p.type==='stock'&&p.cards.length>0){ctx.fillStyle='#fff';ctx.fillRect(p.x,p.y,p.w,p.h);ctx.fillStyle='#000';ctx.font='20px Arial';ctx.fillText('?',p.x+20,p.y+40);}else{for(let i=0;i<p.cards.length;i++){let c=p.cards[i];let x=p.x,y=p.y+i*25;if(c===drag.card)x=drag.x-p.w/2,y=drag.y-p.h/2;ctx.fillStyle=c.face?colors[c.s]:'white';ctx.fillRect(x,y,c.w,c.h);ctx.strokeStyle=c.face?colors[c.s]:'black';ctx.strokeRect(x,y,c.w,c.h);if(c.face){ctx.fillStyle=colors[c.s];ctx.font='16px Arial';ctx.fillText(c.s,x+5,y+15);ctx.fillText(c.c,x+5,y+35);}}}}ctx.fillStyle='#fff';ctx.font='20px Arial';ctx.fillText('Drag cards to build down alternating colors. Aces to Foundations.',20,550);}function getCardAt(mx,my){for(let p of piles){for(let i=p.cards.length-1;i>=0;i--){let c=p.cards[i];if(mx>=p.x&&mx<=p.x+p.w&&my>=p.y+i*25&&my<=p.y+i*25+p.h)return{card:c,pile:p,idx:i};}}return null;}c.onmousedown=e=>{let r=c.getBoundingClientRect();let mx=e.clientX-r.left,my=e.clientY-r.top;let hit=getCardAt(mx,my);if(hit){drag.active=true;drag.card=hit.card;drag.pile=hit.pile;drag.idx=hit.idx;drag.x=mx;drag.y=my;drag.offsetY=my-(drag.pile.y+drag.idx*25);}};c.onmousemove=e=>{let r=c.getBoundingClientRect();drag.x=e.clientX-r.left;drag.y=e.clientY-r.top;};c.onmouseup=e=>{if(drag.active){let r=c.getBoundingClientRect();let mx=e.clientX-r.left,my=e.clientY-r.top;let targetPile=null;for(let p of piles){if(mx>=p.x-5&&mx<=p.x+p.w+5&&my>=p.y-5&&my<=p.y+p.h+5){targetPile=p;break;}}if(targetPile&&targetPile!==drag.pile){let c=drag.card;let valid=false;if(targetPile.type==='foundation'){if(c.v===1&&targetPile.cards.length===0)valid=true;else if(targetPile.cards.length>0){let top=targetPile.cards[targetPile.cards.length-1];if(top.s===c.s&&top.v===c.v-1)valid=true;}}else{if(targetPile.cards.length===0&&c.v===13)valid=true;else if(targetPile.cards.length>0){let top=targetPile.cards[targetPile.cards.length-1];if((colors[top.s]!==colors[c.s])&&top.v===c.v+1)valid=true;}}if(valid){drag.pile.cards.splice(drag.idx,1);if(drag.pile.cards.length>0)drag.pile.cards[drag.pile.cards.length-1].face=true;targetPile.cards.push(c);if(targetPile.type==='foundation'&&c.v===13)targetPile.cards=[];}}drag.active=false;drag.card=null;}};init();setInterval(()=>{draw()},16);</script></body></html> [end of text]


