
<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>JS Poker</title><style>body{font-family:sans-serif;background:#222;color:#fff;display:flex;flex-direction:column;align-items:center;min-height:100vh;margin:0}h1{margin:10px 0}#game-area{width:100%;max-width:600px;padding:10px;box-sizing:border-box}.card{width:60px;height:90px;background:#fff;border-radius:5px;display:inline-flex;flex-direction:column;justify-content:center;align-items:center;margin:5px;font-size:24px;font-weight:bold;color:#000;box-shadow:2px 2px 5px #000;user-select:none}.card.red{color:#d00}.card.back{background:#444;color:transparent;background-image:linear-gradient(45deg,#555 25%,transparent 25%,transparent 75%,#555 75%,#555),linear-gradient(45deg,#555 25%,transparent 25%,transparent 75%,#555 75%,#555);background-size:20px 20px;background-position:0 0,10px 10px}.hand{display:flex;justify-content:center;min-height:100px;margin-bottom:20px}.controls{display:flex;justify-content:center;gap:10px;margin-bottom:20px}button{padding:10px 20px;font-size:16px;cursor:pointer;background:#007bff;color:#fff;border:none;border-radius:5px}button:disabled{background:#555;cursor:not-allowed}#msg{text-align:center;height:30px;margin-bottom:10px;font-weight:bold;color:#ffeb3b}#pot,#chips{text-align:center;font-size:18px;margin:5px}</style></head><body><h1>Single Player Poker</h1><div id="msg">Press Deal to start</div><div id="pot">Pot: $0</div><div id="chips">Chips: $1000</div><div class="hand" id="cpu-hand"></div><div class="hand" id="table"></div><div class="hand" id="player-hand"></div><div class="controls"><button id="btn-deal">Deal</button><button id="btn-call" disabled>Call/Check</button><button id="btn-raise" disabled>Raise</button><button id="btn-fold" disabled>Fold</button></div><script>const S=['♠','♥','♣','♦'],R=['2','3','4','5','6','7','8','9','10','J','Q','K','A'];let deck=[],ph=[],ch=[],th=[],pot=0,chips=1000,bet=0,state=0;const ui={p:document.getElementById('player-hand'),c:document.getElementById('cpu-hand'),t:document.getElementById('table'),m:document.getElementById('msg'),pt:document.getElementById('pot'),cp:document.getElementById('chips'),b:document.getElementById('btn-deal'),cl:document.getElementById('btn-call'),r:document.getElementById('btn-raise'),f:document.getElementById('btn-fold')};function init(){deck=[];for(let s of S)for(let r of R)deck.push({r,s,v:R.indexOf(r)+2});shuffle(deck)}function shuffle(d){for(let i=d.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[d[i],d[j]]=[d[j],d[i]]}}function render(h,hide){h.innerHTML='';(hide?ch:ph).forEach(c=>h.appendChild(cEl(c,hide)))}function cEl(c,hide){const d=document.createElement('div');d.className='card '+(c.s=='♥'||c.s=='♦'?'red':'')+(hide?' back':'');if(!hide){d.innerHTML=c.r+'<br>'+c.s}return d}function upd(){ui.pt.innerText='Pot: $'+pot;ui.cp.innerText='Chips: $'+chips}function msg(s){ui.m.innerText=s}function setBtns(d,c,r,f){ui.b.disabled=d;ui.cl.disabled=c;ui.r.disabled=r;ui.f.disabled=f}function deal(){if(chips<10){msg('Game Over! Refresh to restart.');return}init();ph=[deck.pop(),deck.pop()];ch=[deck.pop(),deck.pop()];th=[];pot=20;chips-=10;bet=0;state=1;render(ui.p,false);render(ui.c,true);render(ui.t,false);upd();msg('Your turn. Call $10, Raise, or Fold.');setBtns(true,false,false,false)}function nextStreet(){if(state==1){th.push(deck.pop(),deck.pop(),deck.pop());state=2}else if(state<4){th.push(deck.pop());state++}else{showdown();return}render(ui.t,false);msg('Your turn.');setBtns(true,false,false,false)}function cpuAct(){const diff=bet;const call=diff;const raise=diff+20;if(Math.random()>0.7&&chips>=raise){msg('CPU Raises $20');bet+=20;chips-=20;pot+=20;setBtns(true,false,false,false)}else if(diff>0){msg('CPU Calls $'+diff);chips-=diff;pot+=diff;bet=0;nextStreet()}else{msg('CPU Checks');nextStreet()}upd()}function showdown(){render(ui.c,false);const ps=evalHand(ph.concat(th));const cs=evalHand(ch.concat(th));let res='';if(ps.s>cs.s)res='You Win!';else if(cs.s>ps.s)res='CPU Wins!';else if(ps.v>cs.v)res='You Win!';else if(cs.v>ps.v)res='CPU Wins!'; else res='Split Pot.';msg(res+' '+ps.n+' vs '+cs.n);chips+=pot;pot=0;upd();setBtns(false,true,true,true)}function evalHand(h){const v=h.map(c=>c.v).sort((a,b)=>b-a);const s=h.map(c=>c.s);const flush=s.every(x=>x===s[0]);const str=v[0]-v[4]==4||(v[0]==14&&v[1]==5&&v[2]==4&&v[3]==3&&v[4]==2);const counts={};v.forEach(x=>counts[x]=(counts[x]||0)+1);const vals=Object.values(counts).sort((a,b)=>b-a);let score=0,name='High Card';if(str&&flush){score=8;name='Straight Flush'}else if(vals[0]==4){score=7;name='Four of a Kind'}else if(vals[0]==3&&vals[1]==2){score=6;name='Full House'}else if(flush){score=5;name='Flush'}else if(str){score=4;name='Straight'}else if(vals[0]==3){score=3;name='Three of a Kind'}else if(vals[0]==2&&vals[1]==2){score=2;name='Two Pair'}else if(vals[0]==2){score=1;name='Pair'}return{s,score,v:v[0],n:name}}ui.b.onclick=deal;ui.cl.onclick=()=>{if(bet>0){chips-=bet;pot+=bet;bet=0;upd();msg('You Called.');nextStreet()}else{msg('You Check.');cpuAct()}};ui.r.onclick=()=>{if(chips>=20){bet+=20;chips-=20;pot+=20;upd();msg('You Raised $20.');cpuAct()}};ui.f.onclick=()=>{msg('You Folded. CPU Wins.');pot=0;upd();setBtns(false,true,true,true)};</script></body></html> [end of text]


