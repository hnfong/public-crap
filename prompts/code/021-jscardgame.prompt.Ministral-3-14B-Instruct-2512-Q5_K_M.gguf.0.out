```html
<!DOCTYPE html><html><head><title>Solitaire: Time Warp</title><style>body{margin:0;background:#222;color:#eee;font:14px Arial;overflow:hidden}#game{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:800px;height:600px}#deck{width:80px;height:120px;background:#333;border-radius:5px;position:absolute;top:10px;left:10px;cursor:pointer}#deck:hover{background:#444}#foundation{position:absolute;top:10px;right:10px;width:400px;height:120px}#waste{position:absolute;top:10px;left:100px;width:120px;height:80px}#tableau{position:absolute;top:120px;left:10px;width:760px;height:460px}#timer{position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:18px}#win{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.8);padding:20px;border-radius:5px;display:none}#win button{margin-top:10px;padding:5px 10px}#card{width:80px;height:120px;position:absolute;background:#fff;border-radius:5px;transition:.2s;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.2)}#card:hover{transform:translateY(-5px);box-shadow:0 5px 10px rgba(0,0,0,0.3)}#card img{width:100%;height:100%;border-radius:5px;object-fit:cover}#card.back{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 120"><rect width="80" height="120" fill="%23333"/><path d="M10 10h60v10H10zM10 30h60v10H10zM10 50h60v10H10zM10 70h60v10H10zM10 90h60v10H10zM10 110h60v10H10z" fill="%23fff"/><path d="M10 10h60v10H10zM10 30h60v10H10zM10 50h60v10H10zM10 70h60v10H10zM10 90h60v10H10zM10 110h60v10H10z" stroke="%23000" stroke-width="0.5"/></svg>') no-repeat center;background-size:contain}</style></head><body><div id=game><div id=deck></div><div id=waste></div><div id=foundation></div><div id=tableau></div><div id=timer>Time: 0</div><div id=win><h2>You Win!</h2><p>Time taken: <span id=time-taken></span></p><button id=restart>Play Again</button></div></div><script>let deck=Array(52).fill().map((_,i)=>({suit:i%4,value:Math.floor(i/4)+1,faceUp:i>=26}));let waste=[],foundation=[[],[],[],[]],tableau=[[],[],[],[],[],[],[]],selected=null,startTime=0,gameOver=false;const suits=['♥','♦','♣','♠'],colors=['red','black'],suitColors={0:'red',1:'red',2:'black',3:'black'};const cardEl=(card,pos,isFaceUp=true)=>document.createElement('div').setAttribute('id',`card-${card.value}-${suits[card.suit]}`).className=`card ${isFaceUp?'':'back'}`;const createCardEl=(card,pos,isFaceUp=true)=>{let el=cardEl(card,pos,isFaceUp);if(isFaceUp)el.innerHTML=`<img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 120'><rect width='80' height='120' fill='${card.suit<2?'#fff':'#000'}'/><text x='40' y='60' font-size='40' text-anchor='middle' fill='${card.suit<2?'#000':'#fff'}'>${card.value}</text><text x='40' y='100' font-size='20' text-anchor='middle' fill='${card.suit<2?'#000':'#fff'}'>${suits[card.suit]}</text></svg>"`;else el.className+=' back';el.style.left=`${pos*85}px`;el.style.top=`${Math.floor(pos/7)*125}px`;el.onmousedown=(e)=>{e.preventDefault();if(gameOver)return;if(selected&&selected!==card)return;selected=card;document.body.style.cursor='grabbing';};el.onmouseup=(e)=>{e.preventDefault();if(!selected)return;if(e.target===el){if(!selected.faceUp)return;selected.faceUp=true;el.className='card';el.innerHTML=`<img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 120'><rect width='80' height='120' fill='${card.suit<2?'#fff':'#000'}'/><text x='40' y='60' font-size='40' text-anchor='middle' fill='${card.suit<2?'#000':'#fff'}'>${card.value}</text><text x='40' y='100' font-size='20' text-anchor='middle' fill='${card.suit<2?'#000':'#fff'}'>${suits[card.suit]}</text></svg>"`;selected=null;document.body.style.cursor='default';return;}let target=null;if(waste.length&&!selected.faceUp)target=waste[waste.length-1];else if(foundation.some(f=>f.length)){for(let f of foundation)if(f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)target=f[f.length-1];}else if(tableau.some(t=>t.length)){for(let t of tableau)if(t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)target=t[t.length-1];}if(target){if(target===waste[waste.length-1])waste.pop();else if(target===foundation.some(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)?.[foundation.some(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)?.[0]]:null)foundation[foundation.findIndex(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)].pop();else if(target===tableau.some(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)?.[tableau.some(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)?.[0]]:null)tableau[tableau.findIndex(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)].pop();if(foundation.some(f=>f.length&&f[f.length-1].value===13&&f[f.length-1].suit===selected.suit)){if(foundation.every(f=>f.length===13)){gameOver=true;document.getElementById('win').style.display='block';document.getElementById('time-taken').textContent=Math.floor((Date.now()-startTime)/1000)+'s';}return;}if(target===waste[waste.length-1])waste.push(selected);else if(target===foundation.some(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)?.[foundation.some(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)?.[0]]:null)foundation[foundation.findIndex(f=>f.length&&f[f.length-1].value+1===selected.value&&f[f.length-1].suit!==selected.suit)].push(selected);else if(target===tableau.some(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)?.[tableau.some(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)?.[0]]:null)tableau[tableau.findIndex(t=>t.length&&t[t.length-1].value-1===selected.value&&t[t.length-1].suit!==selected.suit)].push(selected);render();}selected=null;document.body.style.cursor='default';};return el;}const render=()=>{document.getElementById('deck').innerHTML=deck.length?'':'';document.getElementById('waste').innerHTML=waste.map((card,i)=>createCardEl(card,i,true)).join('');document.getElementById('foundation').innerHTML=foundation.map((f,i)=>f.map((card,j)=>createCardEl(card,j,true)).join('')).join('');document.getElementById('tableau').innerHTML=tableau.map((t,i)=>t.map((card,j)=>createCardEl(card,j,false)).join('')).join('');document.getElementById('timer').textContent=`Time: ${Math.floor((Date.now()-startTime)/1000)}`;}const shuffle=()=>{for(let i=deck.length-1;i>0;i--)deck.splice(Math.floor(Math.random()*(i+1)),0,deck.splice(i,1)[0]);}const init=()=>{deck=Array(52).fill().map((_,i)=>({suit:i%4,value:Math.floor(i/4)+1,faceUp:false}));waste=[];foundation=[[],[],[],[]];tableau=[[],[],[],[],[],[],[]];shuffle();for(let i=0;i<7;i++)for(let j=0;j<i+1;j++)tableau[i].push(deck.pop());render();startTime=Date.now();gameOver=false;document.getElementById('win').style.display='none';}const draw=()=>{if(deck.length)waste.push(deck.pop());else{deck=waste.reverse();waste=[];for(let i=0;i<deck.length;i++)deck[i].faceUp=true;shuffle();for(let i=0;i<deck.length;i++)deck[i].faceUp=false;}render();}document.getElementById('deck').addEventListener('click',()=>{if(gameOver)return;if(deck.length)draw();else{deck=waste.reverse();waste=[];for(let i=0;i<deck.length;i++)deck[i].faceUp=true;shuffle();for(let i=0;i<deck.length;i++)deck[i].faceUp=false;render();}});document.getElementById('restart').addEventListener('click',init);init();</script></body></html>
``` [end of text]


