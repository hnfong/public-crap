<!DOCTYPE html><html><body><canvas id="c" width="800" height="600"></canvas><script>const ctx=c.getContext('2d');const suits=['♠','♥','♦','♣'];const ranks=['2','3','4','5','6','7','8','9','T','J','Q','K','A'];let deck=[],player=[],dealer=[],phase='deal',message='Press SPACE to deal';const scoreHand=h=>{const s=h.map(c=>c.suit),r=h.map(c=>ranks.indexOf(c.rank)).sort((a,b)=>a-b);const flush=s.every(x=>x===s[0]);const straight=r.every((v,i)=>i===0||v===r[i-1]+1);const counts={};r.forEach(x=>counts[x]=(counts[x]||0)+1);const vals=Object.values(counts).sort((a,b)=>b-a);let val=0;if(flush&&straight)val=8;else if(vals[0]===4)val=7;else if(vals[0]===3&&vals[1]===2)val=6;else if(flush)val=5;else if(straight)val=4;else if(vals[0]===3)val=3;else if(vals[0]===2&&vals[1]===2)val=2;else if(vals[0]===2)val=1;return{score:val,rank:r};};const deal=()=>{deck=[];for(let s of suits)for(let r of ranks)deck.push({suit:s,rank:r});for(let i=deck.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[deck[i],deck[j]]=[deck[j],deck[i]]}player=deck.splice(0,5);dealer=deck.splice(0,5);phase='draw';message='Select cards to discard (1-5) then press SPACE';};const drawCards=()=>{const keep=player.map((_,i)=>!document.getElementById(`c${i}`).checked);player=player.filter((_,i)=>keep[i]);while(player.length<5)player.push(deck.pop());while(dealer.length<5)dealer.push(deck.pop());phase='showdown';};const evaluate=()=>{const ps=scoreHand(player),ds=scoreHand(dealer);let msg='';if(ps.score>ds.score)msg='You Win!';else if(ds.score>ps.score)msg='Dealer Wins!';else{const pr=ps.rank.reverse(),dr=ds.rank.reverse();for(let i=0;i<5;i++){if(pr[i]>dr[i]){msg='You Win!';break;}if(dr[i]>pr[i]){msg='Dealer Wins!';break;}if(i===4)msg='Tie!';}}message=msg+' Press SPACE to deal again';};const drawCard=(x,y,c,selected)=>{ctx.fillStyle='#fff';ctx.fillRect(x,y,60,84);ctx.strokeStyle='#000';ctx.strokeRect(x,y,60,84);ctx.fillStyle=c.suit==='♥'||c.suit==='♦'?'#d00':'#000';ctx.font='20px Arial';ctx.fillText(c.rank,x+5,y+20);ctx.fillText(c.suit,x+5,y+40);ctx.font='14px Arial';ctx.fillText(c.rank,x+40,y+75);ctx.fillStyle=selected?'#ff0':'rgba(0,0,0,0.2)';ctx.fillRect(x,y,60,84);ctx.strokeStyle='#ff0';ctx.strokeRect(x,y,60,84);};const drawTable=()=>{ctx.fillStyle='#060';ctx.fillRect(0,0,800,600);ctx.fillStyle='#fff';ctx.font='30px Arial';ctx.fillText(message,20,50);ctx.font='20px Arial';ctx.fillText('Your Hand:',20,120);player.forEach((c,i)=>{const sel=phase==='draw'&&(i===0||document.getElementById(`c${i}`).checked);drawCard(20+i*70,140,c,sel);});ctx.fillText('Dealer:',20,300);dealer.forEach((c,i)=>{drawCard(20+i*70,320,phase==='showdown'?c:{suit:'?',rank:'?'},false);});if(phase==='draw'){ctx.font='16px Arial';ctx.fillText('Select cards to discard:',20,480);for(let i=0;i<5;i++){const cb=document.createElement('input');cb.type='checkbox';cb.id=`c${i}`;cb.checked=true;cb.style.marginRight='5px';document.body.appendChild(cb);}}else if(phase==='showdown'){ctx.font='16px Arial';ctx.fillText('Press SPACE to deal again',20,520);}};document.addEventListener('keydown',e=>{if(e.code==='Space'){if(phase==='deal'||phase==='showdown')deal();else if(phase==='draw')drawCards();else if(phase==='showdown')evaluate();}});deal();setInterval(()=>{drawTable();},30);</script></body></html> [end of text]


