<!DOCTYPE html><html><body><canvas id="c" width="800" height="600"></canvas><script>const ctx=c.getContext('2d');const S=['♠','♥','♣','♦'];const C=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];const R={♠:0,♥:1,♣:0,♦:1};let d=[],f=[[],[],[],[]],t=[[],[],[],[],[],[],[]],h=[],s=0;function init(){d=[];f=[[],[],[],[]];t=[[],[],[],[],[],[],[]];h=[];s=0;for(let i=0;i<52;i++)d.push({v:i%13+1,s:S[i%4],c:R[S[i%4]],o:i});for(let i=51;i>0;i--){let j=Math.floor(Math.random()*(i+1));[d[i],d[j]]=[d[j],d[i]]}for(let i=0;i<7;i++)for(let j=0;j<=i;j++)t[i].push(d.pop());for(let i=0;i<7;i++)t[i][t[i].length-1].f=1}function draw(){ctx.fillStyle='#060';ctx.fillRect(0,0,800,600);ctx.font='20px Arial';ctx.fillStyle='#fff';ctx.fillText('Score: '+s,20,30);for(let i=0;i<4;i++){ctx.fillStyle='#fff';ctx.fillText(C[f[i].length-1]||'A',100+i*80,30);ctx.fillStyle='#000';ctx.fillRect(100+i*80,50,60,80);ctx.strokeStyle='#fff';ctx.strokeRect(100+i*80,50,60,80)}for(let i=0;i<7;i++){ctx.fillStyle='#fff';ctx.fillText('Pile '+(i+1),100+i*80,150);ctx.strokeStyle='#fff';ctx.strokeRect(100+i*80,170,60,80)}for(let i=0;i<4;i++)for(let j=0;j<f[i].length;j++)drawCard(100+i*80,50+j*25,f[i][j]);for(let i=0;i<7;i++)for(let j=0;j<t[i].length;j++)drawCard(100+i*80,170+j*25,t[i][j]);for(let i=0;i<h.length;i++)drawCard(300+i*30,300,h[i]);if(d.length>0){ctx.fillStyle='#fff';ctx.fillText('D',700,30);ctx.strokeStyle='#fff';ctx.strokeRect(700,50,60,80)}else{ctx.fillStyle='#fff';ctx.fillText('R',700,30);ctx.fillRect(700,50,60,80)}ctx.fillStyle='#fff';ctx.fillText('Click deck to deal, click cards to select/move',20,580)}function drawCard(x,y,c){ctx.fillStyle=c.c?'#f00':'#000';ctx.fillRect(x,y,60,80);ctx.fillStyle='#fff';ctx.font='16px Arial';ctx.fillText(c.s+' '+C[c.v-1],x+5,y+15);ctx.strokeStyle='#fff';ctx.strokeRect(x,y,60,80)}let sel=null;function click(e){let r=c.getBoundingClientRect();let x=e.clientX-r.left,y=e.clientY-r.top;if(x>700&&x<760&&y>50&&y<130){if(d.length>0){if(d.length>=3){for(let i=0;i<3;i++)h.push(d.pop())}else{while(d.length)h.push(d.pop())}}else{while(h.length)d.push(h.pop())}return}if(x>100&&x<380&&y>50&&y<130){let i=Math.floor((x-100)/80);if(f[i].length>0){sel={p:'f',i:i,c:f[i][f[i].length-1]}}else{sel=null}return}if(x>100&&x<580&&y>170&&y<350){let i=Math.floor((x-100)/80);if(t[i].length>0){let c=t[i][t[i].length-1];if(c.f){sel={p:'t',i:i,c:c}}else{sel=null}}else{sel=null}return}if(x>300&&x<600&&y>300&&y<380){let i=Math.floor((x-300)/30);if(h[i]){sel={p:'h',i:i,c:h[i]}}else{sel=null}return}}c.addEventListener('click',click);c.addEventListener('dblclick',e=>{let r=c.getBoundingClientRect();let x=e.clientX-r.left,y=e.clientY-r.top;if(x>100&&x<380&&y>50&&y<130){let i=Math.floor((x-100)/80);if(sel&&sel.p=='h')moveToFoundation(i)}else if(x>100&&x<580&&y>170&&y<350){let i=Math.floor((x-100)/80);if(sel&&sel.p=='h')moveToTableau(i)}});function moveToFoundation(i){if(!sel||sel.p!='h')return;let c=sel.c;if(f[i].length===0&&c.v===1)return;let top=f[i][f[i].length-1];if(top.s!==c.s||top.v!==c.v-1)return;f[i].push(c);h.splice(sel.i,1);s+=10;sel=null}function moveToTableau(i){if(!sel||sel.p!='h')return;let c=sel.c;if(t[i].length===0&&c.v!==1)return;let top=t[i][t[i].length-1];if(top.f&&(top.c!==c.c)&&(top.v===c.v+1||top.v===1&&c.v===13)){t[i].push(c);h.splice(sel.i,1);s+=5;sel=null}}init();function loop(){draw();requestAnimationFrame(loop)}loop();</script></body></html> [end of text]


