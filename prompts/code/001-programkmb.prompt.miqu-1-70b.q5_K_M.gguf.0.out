 Here's a complete single-file Java program that meets the requirements:

```java
import java.util.Locale;
import java.util.Scanner;

public class NumberConverter {
    private static final long KB = 1024;
    private static final long MB = KB * KB;
    private static final long GB = MB * KB;

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        scanner.useLocale(Locale.US);
        long totalBytes = 0;
        System.out.println("Enter a string containing numbers with optional suffixes (k, K, m, M, g, G):");
        if (scanner.hasNextLine()) {
            String input = scanner.nextLine();
            String[] numbers = input.split("[ ,]+");
            for (String number : numbers) {
                if (!number.isEmpty()) {
                    double value = Double.parseDouble(number.replaceAll("[kKmMgG]", ""));
                    char suffix = number.charAt(number.length() - 1);
                    switch (suffix) {
                        case 'K', 'k' -> totalBytes += (long) (value * KB);
                        case 'M', 'm' -> totalBytes += (long) (value * MB);
                        case 'G', 'g' -> totalBytes += (long) (value * GB);
                        default -> totalBytes += (long) value;
                    }
                }
            }
            System.out.printf("%.1f%n", (double) totalBytes);
            System.out.printf("%.1f K%n", (double) totalBytes / KB);
            System.out.printf("%.1f M%n", (double) totalBytes / MB);
            System.out.printf("%.1f G%n", (double) totalBytes / GB);
        }
        scanner.close();
    }
}
```

This program reads a string from standard input, extracts all numbers followed by optional suffixes (k, K, m, M, g, G), converts them to their base value, calculates their sum, and prints the total sum as well as the sum in kilobytes (K), megabytes (M), and gigabytes (G). The program handles numbers with commas as thousand separators and supports both lowercase and uppercase suffixes. [end of text]


