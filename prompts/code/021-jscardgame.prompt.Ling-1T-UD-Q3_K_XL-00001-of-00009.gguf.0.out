<!DOCTYPE html><html><head><title>Pyramid Solitaire</title><style>body{font-family:sans-serif;margin:20px}#pyramid{display:flex;flex-wrap:wrap;width:420px}#pyramid div{width:60px;height:80px;border:1px solid #333;margin:2px;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#f0e6c0}#stock{width:120px;height:160px;border:1px dashed #666;margin:10px;padding:10px;display:flex;flex-wrap:wrap}#waste{width:120px;height:160px;border:1px dashed #666;margin:10px;padding:10px}#controls{margin:10px 0}button{margin:5px}#message{font-weight:bold;margin-top:10px}</style></head><body><h1>Pyramid Solitaire</h1><div id="pyramid"></div><div id="controls"><button id="reset">New Game</button><button id="draw">Draw 3</button></div><div style="display:flex"><div id="stock"></div><div id="waste"></div></div><div id="score">Score: 0</div><div id="message"></div><script>const suits='♠♥♦♣',ranks='A23456789TJQK';let deck=[],pyramid=[],stock=[],waste=[],score=0,drawSize=3;function createDeck(){deck=[];for(let s of suits)for(let r of ranks)deck.push({r,s});for(let i=deck.length-1;i>0;i--){let j=Math.floor(Math.random()* (i+1));[deck[i],deck[j]]=[deck[j],deck[i]]}}function render(){document.getElementById('pyramid').innerHTML=pyramid.map((card,i)=>`<div style="background:${card?'#fff':'#f0e6c0'};opacity:${card?1:0}">${card?card.r+card.s:''}</div>`).join('');document.getElementById('stock').innerHTML=stock.length?`<div>${stock.length} left</div>`:'';document.getElementById('waste').innerHTML=waste.map(c=>`<div style="background:#fff">${c.r+c.s}</div>`).join('');document.getElementById('score').textContent=`Score: ${score}`}function init(){createDeck();pyramid=Array(28).fill(null);for(let i=0;i<28;i++){pyramid[i]=deck.pop()}stock=deck;waste=[];score=0;render()}function canRemove(i){if(!pyramid[i])return false;let val=rankValue(pyramid[i].r);for(let j of [-1,-2,8,9]){let ni=i+j;if(ni>=0&&ni<28&&pyramid[ni]){let nval=rankValue(pyramid[ni].r);if(val+nval===13)return ni} }return false}function rankValue(r){return r==='A'?1:r==='K'?13:'23456789TJQ'.indexOf(r)+2}function removePair(i,j){pyramid[i]=pyramid[j]=null;score+=10;checkWin();render()}function checkWin(){if(pyramid.every(c=>!c))showMessage('You cleared the pyramid!')}function draw(){if(!stock.length){stock=waste.reverse();waste=[];document.getElementById('draw').textContent='Draw 3'}let n=Math.min(drawSize,stock.length);for(let i=0;i<n;i++)waste.unshift(stock.pop());render()}document.getElementById('pyramid').addEventListener('click',e=>{let i=[...e.target.parentNode.children].indexOf(e.target);if(i<0||!pyramid[i])return;let j=canRemove(i);if(j!==false)removePair(i,j)});document.getElementById('waste').addEventListener('click',e=>{if(!waste.length)return;let target=e.target;if(!target.textContent)return;let wval=rankValue(waste[0].r);for(let i=0;i<28;i++){if(pyramid[i]&&rankValue(pyramid[i].r)+wval===13){pyramid[i]=null;score+=10;waste.shift();checkWin();render();return}}});document.getElementById('reset').onclick=init;document.getElementById('draw').onclick=draw;function showMessage(m){document.getElementById('message').textContent=m;setTimeout(()=>document.getElementById('message').textContent='',3000)}init()</script></body></html> [end of text]


