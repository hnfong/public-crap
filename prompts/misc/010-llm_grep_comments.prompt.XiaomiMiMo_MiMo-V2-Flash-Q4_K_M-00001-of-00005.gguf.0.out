<think>We are looking for all lines with comments.
 In bash, comments start with a `#` and are usually at the beginning of the line, but can also be after some code.
 However, note that the query says "all lines with comments", so we should output any line that contains a comment.

 Important: We are only to trigger when the input obviously matches the query.

 Let's go through the input line by line:

 Line 1: #!/bin/bash -> This is a shebang, which is a comment in the sense that it starts with #, but it's a special kind of comment. However, the query says "all lines with comments", so we should include it.

 Line 2: set -ex -> No comment.

 Line 3: empty -> No comment.

 Line 4: # Save the path to ./download_check script -> This is a comment.

 Line 5: script_path=$(python3 -c 'import os,sys; print(os.path.realpath(sys.argv[1]))' "$0") -> No comment.

 Line 6: download_check_path=$(dirname "$script_path")/download_check -> No comment.

 Line 7: empty -> No comment.

 Line 8: function download_and_check() { -> No comment.

 Line 9: set -e -> No comment.

 Line 10: curl -C - -O -L "$1" -> No comment.

 Line 11: local my_filename=$(basename "$1") -> No comment.

 Line 12: "$download_check_path" "$my_filename" -> No comment.

 Line 13: } -> No comment.

 Line 14: empty -> No comment.

 Line 15: # This is a script to build and install tmux on macOS without homebrew. -> This is a comment.

 Line 16: prefix=$HOME/apps/tmux -> No comment.

 Line 17: mkdir -p "$prefix" -> No comment.

 Line 18: cd "$prefix" -> No comment.

 Line 19: empty -> No comment.

 Line 20: # Download and build pkg-config -> This is a comment.

 Line 21: download_and_check 'https://pkgconfig.freedesktop.org/releases/pkg-config-0.29.2.tar.gz' -> No comment.

 Line 22: tar zxvf pkg-config-0.29.2.tar.gz -> No comment.

 Line 23: cd pkg-config-0.29.2 -> No comment.

 Line 24: CFLAGS="-Wno-int-conversion" ./configure --prefix="$prefix" --with-internal-glib -> No comment.

 Line 25: make -j 10 -> No comment.

 Line 26: make install -> No comment.

 Line 27: cd .. -> No comment.

 Line 28: empty -> No comment.

 Line 29: # Download and build ncurses -> This is a comment.

 Line 30: download_and_check 'https://ftp.gnu.org/gnu/ncurses/ncurses-6.5.tar.gz' -> No comment.

 Line 31: tar zxvf ncurses-6.5.tar.gz -> No comment.

 Line 32: cd ncurses-6.5 -> No comment.

 Line 33: ./configure --prefix="$prefix" -> No comment.

 Line 34: make -j 10 -> No comment.

 Line 35: make install -> No comment.

 Line 36: cd .. -> No comment.

 Line 37: empty -> No comment.

 Line 38: # Download and build libevent -> This is a comment.

 Line 39: download_and_check 'https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz' -> No comment.

 Line 40: tar zxvf libevent-2.1.12-stable.tar.gz -> No comment.

 Line 41: cd libevent-2.1.12-stable -> No comment.

 Line 42: ./configure --disable-openssl --prefix="$prefix" -> No comment.

 Line 43: make -j 10 -> No comment.

 Line 44: make install -> No comment.

 Line 45: cd .. -> No comment.

 Line 46: empty -> No comment.

 Line 47: empty -> No comment.

 Line 48: # Download and build utf8proc -> This is a comment.

 Line 49: download_and_check 'https://github.com/JuliaStrings/utf8proc/releases/download/v2.9.0/utf8proc-2.9.0.tar.gz' -> No comment.

 Line 50: tar zxvf utf8proc-2.9.0.tar.gz -> No comment.

 Line 51: cd utf8proc-2.9.0 -> No comment.

 Line 52: make prefix="$prefix" -> No comment.

 Line 53: make install prefix="$prefix" -> No comment.

 Line 54: cd .. -> No comment.

 Line 55: empty -> No comment.

 Line 56: # Download and build tmux -> This is a comment.

 Line 57: download_and_check 'https://github.com/tmux/tmux/releases/download/3.5a/tmux-3.5a.tar.gz' -> No comment.

 Line 58: tar zxvf tmux-3.5a.tar.gz -> No comment.

 Line 59: cd tmux-3.5a -> No comment.

 Line 60: PKG_CONFIG="$prefix"/bin/pkg-config ./configure --enable-utf8proc --prefix="$prefix" -> No comment.

 Line 61: make -j 10 -> No comment.

 Line 62: make install -> No comment.

 Line 63: cd .. -> No comment.

 Line 64: empty -> No comment.

 Line 65: ln -sf "$prefix"/bin/tmux ~/bin/tmux -> No comment.

 So, the lines that have comments are: 1, 4, 15, 20, 29, 38, 48, 56.

 We output each of these lines with the line number and then a "---" after each.

 Note: The input includes the line number and the content, so we output exactly as in the input, but only for the matching lines.

 However, note that the input is given with line numbers and then the content, so we output the entire line as it appears in the input.

 Example: for line 1, we output: "1:#!/bin/bash"

 But wait, the input is:

 1:#!/bin/bash
 2:set -ex
 ...

 So we output the line exactly as it appears in the input, including the line number and the colon.

 Important: The query says "all lines with comments", so we are including lines that are entirely a comment and lines that have a comment after some code? 
 But in the input, we see that the comments are at the beginning of the line, except for the shebang which is also at the beginning.

 However, note that the query says "obviously matches", so we are only including lines that have a comment. In bash, a comment is any line that starts with a '#' or has a '#' after some code, but in the input we don't have any lines with code and then a comment. So we are safe to only include lines that start with '#'.

 But wait, line 1 is a shebang, which is a comment in the sense that it starts with '#', but it's a special kind. However, the query says "all lines with comments", so we include it.

 Let's output the matching lines:

 1:#!/bin/bash
 4:# Save the path to ./download_check script
 15:# This is a script to build and install tmux on macOS without homebrew.
 20:# Download and build pkg-config
 29:# Download and build ncurses
 38:# Download and build libevent
 48:# Download and build utf8proc
 56:# Download and build tmux

 We output each of these and then a "---" after each.

 Important: The input ends at line 65, and we are only outputting the lines that match.

 We are not outputting any explanation, just the lines and the separators.

 Let's do it.</think>1:#!/bin/bash
---
4:# Save the path to ./download_check script
---
15:# This is a script to build and install tmux on macOS without homebrew.
---
20:# Download and build pkg-config
---
29:# Download and build ncurses
---
38:# Download and build libevent
---
48:# Download and build utf8proc
---
56:# Download and build tmux
--- [end of text]


