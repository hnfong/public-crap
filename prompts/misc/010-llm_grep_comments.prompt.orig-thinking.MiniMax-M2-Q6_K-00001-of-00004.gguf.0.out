<think>
The user wants a "semantic grep" that outputs lines with comments. The input is a bash script with comments indicated by lines starting with '#'. The query is "all lines with comments". We need to output each line that contains a comment. The user says: "For every line in the input, output the line (together with line number) only if the line has something that matches the given query/description, otherwise ignore the line. Only trigger when the input obviously matches the query, i.e. not tangentially related."

Thus we need to output lines that have comments. In the input, comments are lines that start with '#', but also there may be inline comments after code. In this script, all comment lines start with '#', and there are no inline comments after code. So we need to output lines 1, 4, 15, 20, 29, 38, 48, 56? Let's check each line:

Line 1: #!/bin/bash - comment (shebang)
Line 2: set -ex - not a comment
Line 3: (blank) - not a comment
Line 4: # Save the path to ./download_check script - comment
Line 5: script_path=$(python3 -c 'import os,sys; print(os.path.realpath(sys.argv[1]))' "$0") - not a comment
Line 6: download_check_path=$(dirname "$script_path")/download_check - not a comment
Line 7: (blank) - not a comment
Line 8: function download_and_check() { - not a comment
Line 9: set -e - not a comment
Line 10: curl -C - -O -L "$1" - not a comment
Line 11: local my_filename=$(basename "$1") - not a comment
Line 12: "$download_check_path" "$my_filename" - not a comment
Line 13: } - not a comment
Line 14: (blank) - not a comment
Line 15: # This is a script to build and install tmux on macOS without homebrew. - comment
Line 16: prefix=$HOME/apps/tmux - not a comment
Line 17: mkdir -p "$prefix" - not a comment
Line 18: cd "$prefix" - not a comment
Line 19: (blank) - not a comment
Line 20: # Download and build pkg-config - comment
Line 21: download_and_check 'https://pkgconfig.freedesktop.org/releases/pkg-config-0.29.2.tar.gz' - not a comment
Line 22: tar zxvf pkg-config-0.29.2.tar.gz - not a comment
Line 23: cd pkg-config-0.29.2 - not a comment
Line 24: CFLAGS="-Wno-int-conversion" ./configure --prefix="$prefix" --with-internal-glib - not a comment
Line 25: make -j 10 - not a comment
Line 26: make install - not a comment
Line 27: cd .. - not a comment
Line 28: (blank) - not a comment
Line 29: # Download and build ncurses - comment
Line 30: download_and_check 'https://ftp.gnu.org/gnu/ncurses/ncurses-6.5.tar.gz' - not a comment
Line 31: tar zxvf ncurses-6.5.tar.gz - not a comment
Line 32: cd ncurses-6.5 - not a comment
Line 33: ./configure --prefix="$prefix" - not a comment
Line 34: make -j 10 - not a comment
Line 35: make install - not a comment
Line 36: cd .. - not a comment
Line 37: (blank) - not a comment
Line 38: # Download and build libevent - comment
Line 39: download_and_check 'https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz' - not a comment
Line 40: tar zxvf libevent-2.1.12-stable.tar.gz - not a comment
Line 41: cd libevent-2.1.12-stable - not a comment
Line 42: ./configure --disable-openssl --prefix="$prefix" - not a comment
Line 43: make -j 10 - not a comment
Line 44: make install - not a comment
Line 45: cd .. - not a comment
Line 46: (blank) - not a comment
Line 47: (blank) - not a comment
Line 48: # Download and build utf8proc - comment
Line 49: download_and_check 'https://github.com/JuliaStrings/utf8proc/releases/download/v2.9.0/utf8proc-2.9.0.tar.gz' - not a comment
Line 50: tar zxvf utf8proc-2.9.0.tar.gz - not a comment
Line 51: cd utf8proc-2.9.0 - not a comment
Line 52

