```bash
1:#!/bin/bash
2:set -ex
3:
4:
5:script_path=$(python3 -c 'import os,sys; print(os.path.realpath(sys.argv[1]))' "$0")
6:download_check_path=$(dirname "$script_path")/download_check
7:
8:function download_and_check() {
9:    set -e
10:    curl -C - -O -L "$1"
11:    local my_filename=$(basename "$1")
12:    "$download_check_path" "$my_filename"
13:}
14:
15:
16:This is a script to build and install tmux on macOS without homebrew.
17:prefix=$HOME/apps/tmux
18:mkdir -p "$prefix"
19:cd "$prefix"
20:
21:Download and build pkg-config
22:download_and_check 'https://pkgconfig.freedesktop.org/releases/pkg-config-0.29.2.tar.gz'
23:tar zxvf pkg-config-0.29.2.tar.gz
24:cd pkg-config-0.29.2
25:CFLAGS="-Wno-int-conversion" ./configure --prefix="$prefix" --with-internal-glib
26:make -j 10
27:make install
28:cd ..
29:
30:Download and build ncurses
31:download_and_check 'https://ftp.gnu.org/gnu/ncurses/ncurses-6.5.tar.gz'
32:tar zxvf ncurses-6.5.tar.gz
33:cd ncurses-6.5
34:./configure --prefix="$prefix"
35:make -j 10
36:make install
37:cd ..
38:
39:Download and build libevent
40:download_and_check 'https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz'
41:tar zxvf libevent-2.1.12-stable.tar.gz
42:cd libevent-2.1.12-stable
43:./configure --disable-openssl --prefix="$prefix"
44:make -j 10
45:make install
46:cd ..
47:
48:Download and build utf8proc
49:download_and_check 'https://github.com/JuliaStrings/utf8proc/releases/download/v2.9.0/utf8proc-2.9.0.tar.gz'
50:tar zxvf utf8proc-2.9.0.tar.gz
51:cd utf8proc-2.9.0
52:make prefix="$prefix"
53:make install prefix="$prefix"
54:cd ..
55:
56:Download and build tmux
57:download_and_check 'https://github.com/tmux/tmux/releases/download/3.5a/tmux-3.5a.tar.gz'
58:tar zxvf tmux-3.5a.tar.gz
59:cd tmux-3.5a
60:PKG_CONFIG="$prefix"/bin/pkg-config ./configure --enable-utf8proc --prefix="$prefix"
61:make -j 10
62:make install
63:cd ..
64:
65:ln -sf "$prefix"/bin/tmux ~/bin/tmux
---
``` [end of text]


